#!/bin/bash

##################################################
## Quick script to add a github repo as a mirror
##################################################

if [[ "$#" == "0" ]]; then
    echo "Provide Github URL as first argument"
    exit 1
fi

repo=$1

if [[ ! -d ".git" || -d ".hg" ]]; then
    echo "This is not a git repository!"
    exit 1
fi

if [[ ! "$repo" =~ "github" ]]; then
    echo "This doesn't look like a Github url"
    exit 1
fi

# Add the remote Github URL as a new remote with name 'gh'
git remote add gh $repo
# Push changes to the Github Repo
git push --mirror $repo

echo -e "\nAll Done!"
